<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GUPI CHANNEL - Ultimate</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;900&family=Rajdhani:wght@300;500;700&display=swap');

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000; /* Fallback jika canvas telat load */
            color: white;
            font-family: 'Rajdhani', sans-serif;
            overflow-x: hidden;
        }

        /* 3D Canvas */
        #canvas-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            /* Efek 'Dreamy' / Blur halus pada seluruh 3D world */
            filter: contrast(1.2) saturate(1.2); 
        }

        /* UI Styling */
        section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 0 5%;
            position: relative;
            z-index: 10;
            pointer-events: none; /* Mouse tembus ke canvas */
        }

        .content-box {
            pointer-events: auto;
            max-width: 600px;
            padding: 40px;
            /* Glassmorphism Effect */
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px); 
            -webkit-backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            transform: translateY(50px);
            opacity: 0;
            transition: all 0.8s ease-out;
        }

        .content-box.active {
            transform: translateY(0);
            opacity: 1;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 4rem;
            line-height: 0.9;
            margin: 0 0 20px 0;
            text-transform: uppercase;
            /* Text Gradient & Glow */
            background: linear-gradient(to right, #fff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px rgba(0,255,136,0.5));
        }

        h2 {
            color: #00aaff;
            font-size: 1.5rem;
            letter-spacing: 5px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        p {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #ddd;
        }

        .btn-glitch {
            display: inline-block;
            margin-top: 20px;
            padding: 15px 40px;
            background: #fff;
            color: #000;
            font-weight: 900;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            clip-path: polygon(10% 0, 100% 0, 100% 80%, 90% 100%, 0 100%, 0 20%);
            transition: 0.2s;
            position: relative;
        }

        .btn-glitch:hover {
            background: #00ff88;
            box-shadow: 0 0 30px #00ff88;
            transform: scale(1.05);
        }

        /* Specific Styles per Section */
        #sec-bola h1 { background: linear-gradient(to right, #00aaff, #fff); }
        #sec-bola h2 { color: #fff; }
        
        #sec-bencana .content-box { border-color: #ff0055; background: rgba(50, 0, 0, 0.5); }
        #sec-bencana h1 { background: linear-gradient(to right, #ff0055, #ffaa00); filter: drop-shadow(0 0 15px #ff0055); }
        #sec-bencana h2 { color: #ff0055; }
        #sec-bencana .btn-glitch { background: #ff0055; color: #fff; }
        
        #sec-wisata h1 { background: linear-gradient(to right, #00ff88, #00ffff); }

        /* Loader */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            color: #00ff88; font-family: 'Orbitron'; font-size: 1.5rem;
            transition: opacity 0.5s;
        }

        /* Flash Overlay for Disaster Effect */
        #flash-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; opacity: 0; pointer-events: none; z-index: 5;
            mix-blend-mode: overlay;
        }
    </style>
</head>
<body>

    <!-- Loader sederhana -->
    <div id="loader">LOADING GUPI WORLD...</div>
    
    <!-- Efek Kilat -->
    <div id="flash-overlay"></div>

    <div id="canvas-container"></div>

    <section id="sec-home">
        <div class="content-box">
            <h2>Welcome To</h2>
            <h1>GUPI<br>CHANNEL</h1>
            <p>Sport Analytics • Natural Disasters • Hidden Paradise<br>Menyajikan konten visual dinamis untuk pengalaman maksimal.</p>
            <a href="#" class="btn-glitch">Start Journey</a>
        </div>
    </section>

    <section id="sec-bola" style="justify-content: flex-end; text-align: right;">
        <div class="content-box">
            <h2>The Game</h2>
            <h1>SPORT &<br>SOCCER</h1>
            <p>Highlight pertandingan, statistik mendalam, dan drama lapangan hijau dikemas dengan visual futuristik.</p>
        </div>
    </section>

    <section id="sec-bencana" style="justify-content: center; text-align: center;">
        <div class="content-box">
            <h2>Warning System</h2>
            <h1>BENCANA &<br>RANDOM</h1>
            <p>Dokumentasi kekuatan alam yang tak terduga. Edukasi mitigasi bencana dan kejadian viral di sekitar kita.</p>
            <a href="#" class="btn-glitch">Watch Chaos</a>
        </div>
    </section>

    <section id="sec-wisata">
        <div class="content-box">
            <h2>North Sumatra</h2>
            <h1>WISATA<br>ALAM</h1>
            <p>Jelajahi keindahan Danau Toba dan Bukit Barisan. Healing visual dengan sinematografi kelas atas.</p>
        </div>
    </section>

    <!-- LOAD LIBRARIES SECARA MANUAL (Versi CDN Stabil) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        // --- 0. INIT ---
        const container = document.getElementById('canvas-container');
        const loader = document.getElementById('loader');
        
        // Scene setup
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x000000, 0.02); // Fog hitam

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio > 2 ? 2 : window.devicePixelRatio); // Limit pixel ratio
        container.appendChild(renderer.domElement);

        // --- 1. MEMBUAT OBJEK (Tanpa Shader Kompleks agar aman) ---

        // A. BOLA UTAMA (GLOWING SPHERE)
        // Kita pakai teknik menumpuk mesh untuk efek glow
        const sphereGeo = new THREE.IcosahedronGeometry(1.5, 2);
        
        // Layer 1: Solid Core
        const coreMat = new THREE.MeshBasicMaterial({ color: 0x00ff88, wireframe: true });
        const coreMesh = new THREE.Mesh(sphereGeo, coreMat);
        
        // Layer 2: Glow Shell (Transparent & Additive)
        const glowMat = new THREE.MeshBasicMaterial({
            color: 0x00ff88,
            transparent: true,
            opacity: 0.3,
            blending: THREE.AdditiveBlending,
            wireframe: false
        });
        const glowMesh = new THREE.Mesh(sphereGeo, glowMat);
        glowMesh.scale.set(1.1, 1.1, 1.1); // Sedikit lebih besar

        // Grouping
        const mainObj = new THREE.Group();
        mainObj.add(coreMesh);
        mainObj.add(glowMesh);
        scene.add(mainObj);

        // B. PARTIKEL BACKGROUND (Sangat Banyak)
        const particlesCount = 4000;
        const posArray = new Float32Array(particlesCount * 3);
        const sizesArray = new Float32Array(particlesCount);

        for(let i=0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 60; // Sebar luas
        }
        for(let i=0; i < particlesCount; i++) {
            sizesArray[i] = Math.random();
        }

        const particlesGeo = new THREE.BufferGeometry();
        particlesGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        
        // Material partikel bulat sederhana
        const particlesMat = new THREE.PointsMaterial({
            size: 0.08,
            color: 0xffffff,
            transparent: true,
            opacity: 0.6,
            blending: THREE.AdditiveBlending
        });

        const starField = new THREE.Points(particlesGeo, particlesMat);
        scene.add(starField);

        // C. FLOATING DEBRIS (Sampah visual 3D)
        const debrisGroup = new THREE.Group();
        const debrisGeo1 = new THREE.TetrahedronGeometry(0.5);
        const debrisGeo2 = new THREE.BoxGeometry(0.3, 0.3, 0.3);
        const debrisMat = new THREE.MeshLambertMaterial({ color: 0x444444, wireframe: true });

        for(let i=0; i<40; i++) {
            const mesh = new THREE.Mesh(Math.random() > 0.5 ? debrisGeo1 : debrisGeo2, debrisMat);
            mesh.position.set(
                (Math.random() - 0.5) * 30,
                (Math.random() - 0.5) * 30,
                (Math.random() - 0.5) * 20
            );
            mesh.rotation.set(Math.random(), Math.random(), Math.random());
            debrisGroup.add(mesh);
        }
        scene.add(debrisGroup);

        // D. LIGHTS
        const ambLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambLight);
        
        const pLight1 = new THREE.PointLight(0x00ff88, 2, 20);
        pLight1.position.set(5, 5, 5);
        scene.add(pLight1);

        const pLight2 = new THREE.PointLight(0xff0055, 0, 20); // Merah (awal mati)
        pLight2.position.set(-5, -5, 5);
        scene.add(pLight2);

        // --- 2. ANIMASI LOOP ---
        let time = 0;
        let mouseX = 0;
        let mouseY = 0;

        // Mouse Listener
        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX - window.innerWidth/2) * 0.001;
            mouseY = (e.clientY - window.innerHeight/2) * 0.001;
        });

        function animate() {
            requestAnimationFrame(animate);
            time += 0.01;

            // Rotate Main Object
            mainObj.rotation.y += 0.01;
            mainObj.rotation.x += 0.005;
            // Pulsing Effect
            const scale = 1 + Math.sin(time * 2) * 0.05;
            glowMesh.scale.set(1.1 * scale, 1.1 * scale, 1.1 * scale);

            // Rotate Particles
            starField.rotation.y = time * 0.05;
            starField.rotation.x = mouseY * 0.5; // Interaktif mouse
            starField.rotation.y += mouseX * 0.5;

            // Rotate Debris
            debrisGroup.rotation.y = -time * 0.1;
            debrisGroup.children.forEach(child => {
                child.rotation.x += 0.02;
                child.rotation.y += 0.02;
            });

            // Efek "Shake" saat mode Bencana (dikontrol variabel global nanti)
            if (window.isChaosMode) {
                camera.position.x += (Math.random() - 0.5) * 0.1;
                camera.position.y += (Math.random() - 0.5) * 0.1;
                
                // Random Flash
                if (Math.random() > 0.95) {
                    document.getElementById('flash-overlay').style.opacity = 0.2;
                } else {
                    document.getElementById('flash-overlay').style.opacity = 0;
                }
            } else {
                // Smooth follow mouse
                camera.position.x += (mouseX * 5 - camera.position.x) * 0.05;
                camera.position.y += (-mouseY * 5 - camera.position.y) * 0.05;
            }

            renderer.render(scene, camera);
        }
        animate();

        // --- 3. SCROLL ANIMATION (GSAP) ---
        gsap.registerPlugin(ScrollTrigger);
        window.isChaosMode = false;

        // Intro: UI muncul
        gsap.to('#sec-home .content-box', { opacity: 1, y: 0, duration: 1, delay: 0.5 });

        // HOME -> BOLA
        gsap.timeline({
            scrollTrigger: {
                trigger: "#sec-bola",
                start: "top bottom",
                end: "center center",
                scrub: 1,
                onEnter: () => {
                    document.querySelector('#sec-bola .content-box').classList.add('active');
                    window.isChaosMode = false;
                },
                onLeaveBack: () => {
                    document.querySelector('#sec-bola .content-box').classList.remove('active');
                }
            }
        })
        .to(mainObj.position, { x: -2.5, z: 2 }) // Bola ke kiri
        .to(coreMat.color, { r: 0, g: 0.5, b: 1 }) // Jadi Biru
        .to(glowMat.color, { r: 0, g: 0.5, b: 1 }) // Glow Biru
        .to(pLight1.color, { r: 0, g: 0.5, b: 1 }); // Lampu Biru

        // BOLA -> BENCANA
        gsap.timeline({
            scrollTrigger: {
                trigger: "#sec-bencana",
                start: "top bottom",
                end: "center center",
                scrub: 1,
                onEnter: () => {
                    document.querySelector('#sec-bencana .content-box').classList.add('active');
                    window.isChaosMode = true; // AKTIFKAN EFEK GEMPA
                },
                onLeave: () => {
                    window.isChaosMode = false;
                },
                onLeaveBack: () => {
                    window.isChaosMode = false;
                    document.querySelector('#sec-bencana .content-box').classList.remove('active');
                },
                onEnterBack: () => {
                    window.isChaosMode = true;
                }
            }
        })
        .to(mainObj.position, { x: 0, z: -2 }) // Mundur ke tengah
        .to(mainObj.scale, { x: 0.5, y: 0.5, z: 0.5 }) // Mengecil
        .to(coreMat.color, { r: 1, g: 0, b: 0.2 }) // Merah
        .to(glowMat.color, { r: 1, g: 0, b: 0.2 }) // Glow Merah
        .to(pLight1, { intensity: 0 }) // Lampu hijau mati
        .to(pLight2, { intensity: 5 }) // Lampu merah nyala terang
        .to(scene.fog, { density: 0.05 }); // Fog tebal

        // BENCANA -> WISATA
        gsap.timeline({
            scrollTrigger: {
                trigger: "#sec-wisata",
                start: "top bottom",
                end: "center center",
                scrub: 1,
                onEnter: () => {
                    document.querySelector('#sec-wisata .content-box').classList.add('active');
                },
                onLeaveBack: () => {
                    document.querySelector('#sec-wisata .content-box').classList.remove('active');
                }
            }
        })
        .to(mainObj.position, { x: 3, y: 1, z: 1 }) // Ke kanan
        .to(mainObj.scale, { x: 1, y: 1, z: 1 }) // Normal
        .to(coreMat.color, { r: 0, g: 1, b: 0.5 }) // Hijau
        .to(glowMat.color, { r: 0, g: 1, b: 0.5 }) // Glow Hijau
        .to(pLight2, { intensity: 0 })
        .to(pLight1, { intensity: 2, color: '#00ffaa' })
        .to(scene.fog, { density: 0.01 });

        // Handler Resize & Load
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Hapus Loader jika semua sudah siap
        window.onload = () => {
            setTimeout(() => {
                loader.style.opacity = 0;
                setTimeout(() => loader.style.display = 'none', 500);
            }, 1000);
        };

    </script>
</body>
</html>
